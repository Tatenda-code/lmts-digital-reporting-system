<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GP Maintenance</title>
<script src="https://cdn.tailwindcss.com"></script>

<script>
// ----------------------------
// AUTO CALCULATIONS
// ----------------------------

// Normal Hours + OT = Total Hours
function calcTotalHours() {
    let normal = parseFloat(document.getElementById("normal_hours").value) || 0;
    let ot     = parseFloat(document.getElementById("normal_ot").value) || 0;
    document.getElementById("total_hours").value = (normal + ot).toFixed(1);
}

// ----------------------------

// ----------------------------

// Digits only, max 6
function validateMileage(input) {
    input.value = input.value.replace(/[^0-9]/g, "").slice(0, 6);
    calcKMs();
}

// Calculate difference only
function calcKMs() {
    let start = parseInt(document.getElementById("start_mileage").value) || 0;
    let end   = parseInt(document.getElementById("end_mileage").value) || 0;

    let diff = end - start;
    document.getElementById("total_kms").value = diff >= 0 ? diff : 0;
}
</script>

<style>
  body {
      background: radial-gradient(circle at top, #725e5e, #0f0f0f);
  }
  .inner-box {
      background: rgba(0,0,0,0.3);
      padding: 2rem;
      border-radius: 1.5rem;
      box-shadow: 0 0 2rem rgba(255,0,0,0.5);
      border: 1px solid #f00;
      color: white;
  }
  select, input, textarea {
      background-color: #1f1f1f;
      color: #fff;
      border: 1px solid #f00;
      font-weight: bold;
  }
  select:focus, input:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(255,0,0,0.5);
  }
  button {
      background: linear-gradient(to right, #b91c1c, #f87171);
      color: white;
  }
  button:hover {
      background: linear-gradient(to right, #ef4444, #fca5a5);
  }
  .admin-btn {
      background: linear-gradient(to right, #374151, #1f2937);
      color: white;
  }
  .admin-btn:hover {
      background: linear-gradient(to right, #4b5563, #111827);
  }
</style>
</head>

<body class="flex items-center justify-center min-h-screen p-4">

<div class="w-full max-w-3xl mx-auto inner-box relative">

<a href="gp_admin.php"
   class="admin-btn absolute top-4 right-4 px-6 py-2 text-sm font-bold rounded-lg shadow-md">
Admin Panel
</a>

<h1 class="text-3xl font-extrabold text-center text-white mb-6 mt-12">
Daily Information Tracking Sheet (GP)
</h1>

<form action="gp_submit.php" method="POST" class="space-y-4">

<!-- Technician -->
<div>
<label class="font-semibold">Technician Name *</label>
<select name="tech_name" class="w-full p-2 rounded" required>
<option value="">Select Technician</option>
<option>Charlie</option>
<option>Desire</option>
<option>Fedinandt</option>
<option>Innocent</option>
<option>Kimpton</option>
<option>Mlungisi</option>
<option>Sheldon</option>
<option>Tom</option>
<option>Viorah</option>
</select>
</div>

<!-- Date -->
<div class="flex gap-3">
<select name="day" class="flex-1 p-2 rounded" required>
<option value="">Day</option>
<script>
for(let i=1;i<=31;i++){
let v=i.toString().padStart(2,'0');
document.write(`<option value="${v}">${v}</option>`);
}
</script>
</select>

<select name="month" class="flex-1 p-2 rounded" required>
<option value="">Month</option>
<option value="01">January</option>
<option value="02">February</option>
<option value="03">March</option>
<option value="04">April</option>
<option value="05">May</option>
<option value="06">June</option>
<option value="07">July</option>
<option value="08">August</option>
<option value="09">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select>

<select name="year" class="flex-1 p-2 rounded" required>
<option value="">Year</option>
<script>
for(let y=2025;y<=2030;y++){
document.write(`<option value="${y}">${y}</option>`);
}
</script>
</select>
</div>

<!-- Weekday -->
<div>
<label class="font-semibold">Day *</label>
<select name="weekday" class="w-full p-2 rounded" required>
<option value="">Select Day</option>
<option>Monday</option>
<option>Tuesday</option>
<option>Wednesday</option>
<option>Thursday</option>
<option>Friday</option>
<option>Saturday</option>
<option>Sunday</option>
</select>
</div>

<!-- Start / End Time -->
<div class="flex gap-3">
<select name="start_hour" class="flex-1 p-2 rounded" required>
<option value="">Start Hour</option>
<script>
for(let h=0;h<24;h++){
let v=h.toString().padStart(2,'0');
document.write(`<option value="${v}">${v}</option>`);
}
</script>
</select>

<select name="start_minute" class="flex-1 p-2 rounded" required>
<option value="">Minute</option>
<option>00</option>
<option>30</option>
</select>
</div>

<div class="flex gap-3">
<select name="end_hour" class="flex-1 p-2 rounded" required>
<option value="">End Hour</option>
<script>
for(let h=0;h<24;h++){
let v=h.toString().padStart(2,'0');
document.write(`<option value="${v}">${v}</option>`);
}
</script>
</select>

<select name="end_minute" class="flex-1 p-2 rounded" required>
<option value="">Minute</option>
<option>00</option>
<option>30</option>
</select>
</div>

<!-- Normal / OT / Total -->
<div>
<label class="font-semibold">Normal Hours *</label>
<select id="normal_hours" name="normal_hours" onchange="calcTotalHours()" class="w-full p-2 rounded" required>
<option value="">Select</option>
<script>
for(let h=0;h<=24;h+=0.5){
document.write(`<option>${h}</option>`);
}
</script>
</select>
</div>

<div>
<label class="font-semibold">Normal OT *</label>
<select id="normal_ot" name="normal_ot" onchange="calcTotalHours()" class="w-full p-2 rounded" required>
<option value="">Select</option>
<script>
for(let h=0;h<=24;h+=0.5){
document.write(`<option>${h}</option>`);
}
</script>
</select>
</div>

<div>
<label class="font-semibold">Total Hours *</label>
<input id="total_hours" name="total_hours" readonly class="w-full p-2 rounded bg-gray-900">
</div>

<!-- Reference / Status -->
<div>
<label class="font-semibold">Reference / Circuit ID *</label>
<input type="text" name="ref_number" class="w-full p-2 rounded bg-gray-900" required>
</div>

<div>
<label class="font-semibold">Fault Status *</label>
<select name="fault_status" class="w-full p-2 rounded bg-gray-900" required>
<option value="">Select</option>
<option>Completed</option>
<option>In Progress</option>
<option>Deferred</option>
<option>Cancelled</option>
</select>
</div>

<!-- Mileage -->
<div class="flex gap-3">
<div class="flex-1">
<label class="text-sm font-semibold">Start Mileage (km)</label>
<input id="start_mileage" name="start_mileage" oninput="validateMileage(this)" class="w-full p-2 rounded">
</div>
<div class="flex-1">
<label class="text-sm font-semibold">End Mileage (km)</label>
<input id="end_mileage" name="end_mileage" oninput="validateMileage(this)" class="w-full p-2 rounded">
</div>
</div>

<div>
<label class="font-semibold">Total (km)</label>
<input id="total_kms" name="total_kms" readonly class="w-full p-2 rounded bg-gray-900">
</div>

<!-- Comments -->
<div>
<label class="font-semibold">Comments</label>
<textarea name="comments" rows="6" maxlength="1000" class="w-full p-2 rounded bg-gray-900"></textarea>
</div>

<button type="submit" class="w-full p-3 rounded font-bold shadow-lg">
Submit
</button>

</form>
</div>
</body>
</html>
